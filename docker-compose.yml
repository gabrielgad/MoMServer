# MoM Reborn Server - Docker Compose
# Runs all server components in a 32-bit container

version: '3.8'

services:
  momserver:
    build:
      context: .
      dockerfile: Dockerfile.32bit
    container_name: mom-server
    # Use host networking for UDP game traffic
    network_mode: host
    volumes:
      - ./data:/server/data
      - ./logs:/server/logs
      - ./projects:/server/projects
      - ./serverconfig:/server/serverconfig
      - ./common:/server/common
      - ./minions.of.mirth:/server/minions.of.mirth
      - ./main.cs:/server/main.cs
      - ./zoneserver.py:/server/zoneserver.py
      - ./mud:/server/mud
      - ./mud_ext:/server/mud_ext
    restart: unless-stopped
    # Override entrypoint for debugging if needed:
    # command: /bin/bash -c "sleep infinity"
